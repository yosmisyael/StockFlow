<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.text.*?>

<?import org.kordamp.ikonli.javafx.FontIcon?>
<BorderPane stylesheets="@../assets/sidebar.css, @../assets/topbar.css, @../assets/utils.css, @../assets/product-create.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.oop.stockflow.controller.ProductCreateController">
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="navbar">
            <padding>
                <Insets bottom="16" left="24" right="24" top="16"/>
            </padding>

            <!-- Logo Section -->
            <HBox alignment="CENTER_LEFT" spacing="12" HBox.hgrow="NEVER">
                <Group>
                    <SVGPath
                            content="M30 0C34.4183 0 38 3.58172 38 8V32C38 36.4183 34.4183 40 30 40H8C3.58172 40 0 36.4183 0 32V8C0 3.58172 3.58172 0 8 0H30Z"
                            fill="#2563EB" scaleX="1.3" scaleY="1.3"/>
                    <SVGPath
                            content="M30 0C34.4183 0 38 3.58172 38 8V32C38 36.4183 34.4183 40 30 40H8C3.58172 40 0 36.4183 0 32V8C0 3.58172 3.58172 0 8 0H30Z"
                            fill="transparent" scaleX="1.3" scaleY="1.3" stroke="#E5E7EB"/>
                    <SVGPath
                            content="M7.75 27.4063V16.2723C7.75 15.3512 8.30898 14.525 9.16328 14.184L18.5816 10.4188C18.8488 10.3098 19.1477 10.3098 19.4184 10.4188L28.8367 14.184C29.691 14.525 30.25 15.3547 30.25 16.2723V27.4063C30.25 27.8739 29.8738 28.25 29.4062 28.25H27.7188C27.2512 28.25 26.875 27.8739 26.875 27.4063V18.125C26.875 17.5028 26.3723 17 25.75 17H12.25C11.6277 17 11.125 17.5028 11.125 18.125V27.4063C11.125 27.8739 10.7488 28.25 10.2812 28.25H8.59375C8.12617 28.25 7.75 27.8739 7.75 27.4063ZM24.9062 28.25H13.0938C12.6262 28.25 12.25 27.8739 12.25 27.4063V25.4375H25.75V27.4063C25.75 27.8739 25.3738 28.25 24.9062 28.25ZM12.25 24.3125V22.0625H25.75V24.3125H12.25ZM12.25 20.9375V18.125H25.75V20.9375H12.25Z"
                            fill="white" scaleX="1.3" scaleY="1.3"/>
                </Group>
                <VBox>
                    <Label styleClass="app-title" text="StockFlow">
                        <font>
                            <Font name="System Bold" size="20.0"/>
                        </font>
                    </Label>
                    <Label styleClass="app-subtitle" text="Warehouse Management">
                        <font>
                            <Font size="16.0"/>
                        </font>
                    </Label>
                </VBox>
            </HBox>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Notification Bell -->
            <StackPane styleClass="notification-bell">
                <Label styleClass="bell-icon" text="ðŸ””">
                    <font>
                        <Font size="24"/>
                    </font>
                </Label>
                <Label styleClass="notification-badge" text="3">
                    <font>
                        <Font name="System Bold" size="10"/>
                    </font>
                    <StackPane.margin>
                        <Insets right="-8" top="-8"/>
                    </StackPane.margin>
                </Label>
            </StackPane>

            <!-- Date and Status -->
            <HBox alignment="CENTER" spacing="16">
                <Label fx:id="dateLabel" styleClass="date-label" text="N/A">
                    <font>
                        <Font size="14"/>
                    </font>
                </Label>
            </HBox>
        </HBox>
    </top>

    <left>
        <VBox styleClass="sidebar" minWidth="200" prefWidth="200" spacing="0">
            <padding>
                <Insets top="24" right="0" bottom="24" left="0"/>
            </padding>

            <VBox spacing="8" styleClass="user-section">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane styleClass="user-avatar">
                        <Label fx:id="initialLabel" styleClass="user-initials" text="JS"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label fx:id="nameLabel" styleClass="user-name" text="N/A"/>
                        <Label fx:id="roleLabel" style="-fx-background-radius: 24;" styleClass="user-role" text="N/A">
                            <font>
                                <Font size="13.0"/>
                            </font>
                        </Label>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Navigation Menu -->
            <VBox spacing="4" VBox.vgrow="NEVER">
                <padding>
                    <Insets top="12"/>
                </padding>
                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button" onAction="#goToWarehouseDashboard"
                        text="Warehouse Dashboard" graphicTextGap="12">
                    <graphic>
                        <FontIcon iconLiteral="fas-home" iconSize="16"/>
                    </graphic>
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button, nav-button-active" text="Stock Management"
                        onAction="#goToProductIndex" graphicTextGap="12">
                    <graphic>
                        <FontIcon iconLiteral="fas-boxes" iconSize="16"/>
                    </graphic>
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button" text="Staff Management" graphicTextGap="12" onAction="#goToStaffMenu">
                    <graphic>
                        <FontIcon iconLiteral="fas-users"  iconSize="16"/>
                    </graphic>
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
            </VBox>

            <VBox VBox.vgrow="ALWAYS">
                <Region VBox.vgrow="ALWAYS"/>
                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="logout-button" text="Logout"
                        onAction="#handleLogout">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <graphic>
                        <FontIcon iconColor="#ef4444" iconLiteral="fas-sign-out-alt" iconSize="16"/>
                    </graphic>
                    <VBox.margin>
                        <Insets left="12.0" right="12.0" bottom="50"/>
                    </VBox.margin>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="scroll-pane">
            <VBox styleClass="main-content">
                <!-- Form Container -->
                <VBox styleClass="form-wrapper">
                    <VBox spacing="32" styleClass="form-container">
                        <!-- Header -->
                        <VBox spacing="8">
                            <Label styleClass="form-title" text="Add New Product" />
                            <Label styleClass="form-subtitle" text="Register new product to the inventory system" />
                        </VBox>

                        <!-- Form Fields -->
                        <VBox spacing="28" styleClass="form-fields">
                            <!-- Product Type Selection -->
                            <VBox spacing="12">
                                <Label styleClass="field-label" text="Product Type" />
                                <HBox spacing="16">
                                    <RadioButton fx:id="rbDryGood" selected="true" styleClass="radio-button" text="Dry Good">
                                        <toggleGroup>
                                            <ToggleGroup fx:id="productTypeGroup" />
                                        </toggleGroup>
                                    </RadioButton>
                                    <RadioButton fx:id="rbFresh" styleClass="radio-button" text="Fresh Product" toggleGroup="$productTypeGroup" />
                                </HBox>
                            </VBox>
                            <!-- Basic Information Section -->
                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Product Name" />
                                <TextField fx:id="txtName" promptText="Enter product name" styleClass="text-field" />
                            </VBox>

                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Brand" />
                                <TextField fx:id="txtBrand" promptText="Enter brand name" styleClass="text-field" />
                            </VBox>

                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Description" />
                                <TextArea fx:id="txtDescription" prefRowCount="3" promptText="Enter product description" styleClass="text-area" />
                            </VBox>

                            <!-- Pricing and Measurements -->
                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Purchase Price" />
                                <TextField fx:id="txtPurchasePrice" promptText="Enter purchase price (e.g., 99.99)" styleClass="text-field" />
                            </VBox>

                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Weight per Unit (kg)" />
                                <TextField fx:id="txtWeight" promptText="Enter weight in kilograms" styleClass="text-field" />
                            </VBox>

                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Volume per Unit (mÂ³)" />
                                <TextField fx:id="txtVolume" promptText="Enter volume in cubic meters" styleClass="text-field" />
                            </VBox>

                            <VBox spacing="8">
                                <Label styleClass="field-label" text="Initial Quantity" />
                                <TextField fx:id="txtQuantity" promptText="Enter initial stock quantity" styleClass="text-field" />
                            </VBox>

                            <!-- Dry Good Specific Fields -->
                            <VBox fx:id="dryGoodFields" spacing="24">
                                <Separator styleClass="section-separator" />

                                <Label styleClass="section-title" text="Dry Good Settings" />

                                <VBox spacing="8">
                                    <Label styleClass="field-label" text="Reorder Point" />
                                    <TextField fx:id="txtReorderPoint" promptText="Minimum stock level before reorder" styleClass="text-field" />
                                </VBox>

                                <VBox spacing="8">
                                    <Label styleClass="field-label" text="Reorder Quantity" />
                                    <TextField fx:id="txtReorderQuantity" promptText="Quantity to reorder when stock is low" styleClass="text-field" />
                                </VBox>

                                <VBox spacing="8">
                                    <Label styleClass="field-label" text="Units per Case" />
                                    <TextField fx:id="txtUnitsPerCase" promptText="Number of units per case/package" styleClass="text-field" />
                                </VBox>
                            </VBox>

                            <!-- Fresh Product Specific Fields -->
                            <VBox fx:id="freshFields" managed="false" spacing="24" visible="false">
                                <Separator styleClass="section-separator" />

                                <Label styleClass="section-title" text="Fresh Product Settings" />

                                <VBox spacing="8">
                                    <Label styleClass="field-label" text="Required Temperature (Â°C)" />
                                    <TextField fx:id="txtRequiredTemp" promptText="Storage temperature in Celsius (e.g., 4.5)" styleClass="text-field" />
                                </VBox>

                                <VBox spacing="8">
                                    <Label styleClass="field-label" text="Days to Alert Before Expiry" />
                                    <TextField fx:id="txtDaysToAlert" promptText="Alert threshold in days (e.g., 7)" styleClass="text-field" />
                                </VBox>
                            </VBox>
                        </VBox>

                        <!-- Action buttons -->
                        <HBox alignment="CENTER_RIGHT" spacing="12" styleClass="button-group"> <padding>
                            <Insets top="16.0" /> </padding>
                            <Button fx:id="btnCancel" onAction="#cancelCreate" styleClass="button-secondary" text="Cancel">
                                <font> <Font size="14.0" />
                                </font>
                                <padding> <Insets bottom="10.0" left="24.0" right="24.0" top="10.0" />
                                </padding>
                            </Button>
                            <Button fx:id="btnCreate" onAction="#createProduct" styleClass="button-primary" text="+ Add Product">
                                <font> <Font name="System Bold" size="14.0" />
                                </font>
                                <padding> <Insets bottom="10.0" left="24.0" right="24.0" top="10.0" />
                                </padding>
                            </Button>
                     <VBox.margin>
                        <Insets />
                     </VBox.margin>
                        </HBox>
                    </VBox>

                    <VBox spacing="12" style="-fx-border-radius: 8; -fx-background-radius: 8;" styleClass="tips-box">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <Label styleClass="tips-icon" text="ðŸ’¡" />
                            <Label styleClass="tips-title" text="Product Information Guide:" />
                        </HBox>
                        <VBox spacing="6">
                            <padding>
                                <Insets left="32" /> </padding>
                            <Label styleClass="tips-list-item" text="â€¢ Dry Good: Non-perishable items with long shelf life (canned goods, electronics, etc.)" />
                            <Label styleClass="tips-list-item" text="â€¢ Fresh Product: Perishable items requiring temperature control (produce, dairy, etc.)" />
                            <Label styleClass="tips-list-item" text="â€¢ SKU is generated automatically and cannot be changed after creation" />
                            <Label styleClass="tips-list-item" text="â€¢ All fields marked with * are required (though none are currently marked)" />
                        </VBox>
                  <VBox.margin>
                     <Insets top="20.0" />
                  </VBox.margin>
                    </VBox>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
