<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.Group?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.layout.StackPane?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<BorderPane styleClass="root"
            stylesheets="@../assets/topbar.css, @../assets/sidebar.css, @../assets/utils.css, @../assets/transaction-detail.css"
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.oop.stockflow.controller.TransactionShowController">

    <!-- Top Navigation Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="navbar">
            <padding>
                <Insets bottom="16" left="24" right="24" top="16"/>
            </padding>

            <!-- Logo Section -->
            <HBox alignment="CENTER_LEFT" spacing="12" HBox.hgrow="NEVER">
                <Group>
                    <SVGPath
                            content="M30 0C34.4183 0 38 3.58172 38 8V32C38 36.4183 34.4183 40 30 40H8C3.58172 40 0 36.4183 0 32V8C0 3.58172 3.58172 0 8 0H30Z"
                            fill="#2563EB" scaleX="1.3" scaleY="1.3"/>
                    <SVGPath
                            content="M30 0C34.4183 0 38 3.58172 38 8V32C38 36.4183 34.4183 40 30 40H8C3.58172 40 0 36.4183 0 32V8C0 3.58172 3.58172 0 8 0H30Z"
                            fill="transparent" scaleX="1.3" scaleY="1.3" stroke="#E5E7EB"/>
                    <SVGPath
                            content="M7.75 27.4063V16.2723C7.75 15.3512 8.30898 14.525 9.16328 14.184L18.5816 10.4188C18.8488 10.3098 19.1477 10.3098 19.4184 10.4188L28.8367 14.184C29.691 14.525 30.25 15.3547 30.25 16.2723V27.4063C30.25 27.8739 29.8738 28.25 29.4062 28.25H27.7188C27.2512 28.25 26.875 27.8739 26.875 27.4063V18.125C26.875 17.5028 26.3723 17 25.75 17H12.25C11.6277 17 11.125 17.5028 11.125 18.125V27.4063C11.125 27.8739 10.7488 28.25 10.2812 28.25H8.59375C8.12617 28.25 7.75 27.8739 7.75 27.4063ZM24.9062 28.25H13.0938C12.6262 28.25 12.25 27.8739 12.25 27.4063V25.4375H25.75V27.4063C25.75 27.8739 25.3738 28.25 24.9062 28.25ZM12.25 24.3125V22.0625H25.75V24.3125H12.25ZM12.25 20.9375V18.125H25.75V20.9375H12.25Z"
                            fill="white" scaleX="1.3" scaleY="1.3"/>
                </Group>
                <VBox>
                    <Label styleClass="app-title" text="StockFlow">
                        <font>
                            <Font name="System Bold" size="20.0"/>
                        </font>
                    </Label>
                    <Label styleClass="app-subtitle" text="Warehouse Management">
                        <font>
                            <Font size="16.0"/>
                        </font>
                    </Label>
                </VBox>
            </HBox>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Notification Bell -->
            <StackPane styleClass="notification-bell">
                <Label styleClass="bell-icon" text="🔔">
                    <font>
                        <Font size="24"/>
                    </font>
                </Label>
                <Label styleClass="notification-badge" text="3">
                    <font>
                        <Font name="System Bold" size="10"/>
                    </font>
                    <StackPane.margin>
                        <Insets right="-8" top="-8"/>
                    </StackPane.margin>
                </Label>
            </StackPane>

            <!-- Date and Status -->
            <HBox alignment="CENTER" spacing="16">
                <Label fx:id="dateLabel" styleClass="date-label" text="N/A">
                    <font>
                        <Font size="14"/>
                    </font>
                </Label>
            </HBox>
        </HBox>
    </top>

    <!-- Sidebar -->
    <left>
        <VBox styleClass="sidebar" minWidth="200" prefWidth="200" spacing="0">
            <padding>
                <Insets top="24" right="0" bottom="24" left="0"/>
            </padding>

            <VBox spacing="8" styleClass="user-section">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane styleClass="user-avatar">
                        <Label fx:id="initialLabel" styleClass="user-initials" text="JS"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label fx:id="nameLabel" styleClass="user-name" text="N/A"/>
                        <Label fx:id="roleLabel" style="-fx-background-radius: 24;" styleClass="user-role" text="N/A">
                            <font>
                                <Font size="13.0"/>
                            </font>
                        </Label>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Navigation Menu -->
            <VBox spacing="4" VBox.vgrow="NEVER">
                <padding>
                    <Insets top="12"/>
                </padding>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button, nav-button-active"
                        text="Transaction Index">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button"
                        onAction="#goToInboundTransaction" text="Inbound Transaction">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button"
                        onAction="#goToOutboundTransaction" text="Outbound Transaction">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>

                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="nav-button"
                        text="Settings" onAction="#goToSettings">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <font>
                        <Font size="14"/>
                    </font>
                </Button>
            </VBox>

            <VBox VBox.vgrow="ALWAYS">
                <Region VBox.vgrow="ALWAYS"/>
                <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="logout-button" text="Logout"
                        onAction="#handleLogout">
                    <padding>
                        <Insets bottom="12" left="16" right="12" top="12"/>
                    </padding>
                    <graphic>
                        <FontIcon iconColor="#ef4444" iconLiteral="fas-sign-out-alt" iconSize="16"/>
                    </graphic>
                    <VBox.margin>
                        <Insets left="12.0" right="12.0" bottom="50"/>
                    </VBox.margin>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <VBox styleClass="main-content">
            <!-- Page Title -->
            <HBox styleClass="content-container">
                <VBox spacing="8">
                    <HBox alignment="CENTER_LEFT" prefHeight="36.0" prefWidth="297.0" style="-fx-spacing: 2;">
                        <children>
                            <Label styleClass="breadcrumb" text="Transactions"/>
                            <Label styleClass="breadcrumb-separator" text="›"/>
                            <Label styleClass="breadcrumb" text="Transaction Details"/>
                        </children>
                    </HBox>
                    <Label styleClass="page-title" text="Transaction Details"/>
                    <Label styleClass="page-subtitle" text="View comprehensive information about this transaction"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS" />
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="header">
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button onAction="#goToTransactionIndex" styleClass="back-button" text="← Back"/>
                </HBox>
            </HBox>

            <!-- Transaction Header Card -->
            <HBox alignment="CENTER_LEFT" styleClass="transaction-header-card">
                <VBox spacing="5">
                    <Label fx:id="transactionId" styleClass="transaction-id" text="Transaction ID"/>
                    <HBox spacing="15">
                        <HBox alignment="CENTER_LEFT" spacing="5">
                            <Label fx:id="transactionDate" styleClass="transaction-meta" text="October 22, 2025"/>
                        </HBox>
                    </HBox>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusHeader" text="Committed"/>
                <VBox.margin>
                    <Insets left="30.0" right="30.0"/>
                </VBox.margin>
            </HBox>

            <!-- Content Grid -->
            <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS">
                <VBox spacing="20" styleClass="content-container">
                    <!-- First Row: Transaction Info & Product Info -->
                    <HBox spacing="20" styleClass="row">
                        <!-- Transaction Information -->
                        <VBox spacing="15" styleClass="info-card" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label styleClass="section-title" text="Transaction Information"/>
                            </HBox>

                            <GridPane hgap="20" styleClass="info-grid" vgap="15">
                                <Label style="-fx-font-size: 14;" styleClass="label-key" text="Transaction Type:"
                                       GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                <Label fx:id="transactionType" styleClass="label-value, badge-outbound" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                <Label styleClass="label-key" text="Status:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="1"/>
                                <Label fx:id="status" style="-fx-font-size: 16;" styleClass="label-value, badge-shipped"
                                       text="N/A" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                    <font>
                                        <Font size="27.0"/>
                                    </font>
                                </Label>

                                <Label styleClass="label-key" text="Shipping Method:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="2"/>
                                <Label fx:id="shippingMethod" styleClass="label-value" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                <columnConstraints>
                                    <ColumnConstraints/>
                                    <ColumnConstraints/>
                                </columnConstraints>
                                <rowConstraints>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                </rowConstraints>
                            </GridPane>
                        </VBox>

                        <!-- Product Information -->
                        <VBox spacing="15" styleClass="info-card" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label styleClass="section-title" text="Product Information"/>
                            </HBox>

                            <GridPane hgap="20" styleClass="info-grid" vgap="15">
                                <Label styleClass="label-key" text="Product Name:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="0"/>
                                <Label fx:id="productName" styleClass="label-value" text="N/A" GridPane.columnIndex="1"
                                       GridPane.rowIndex="0"/>

                                <Label styleClass="label-key" text="Product SKU:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="1"/>
                                <Label fx:id="productSku" styleClass="label-value, sku-value" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                <Label styleClass="label-key" text="Brand:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="2"/>
                                <Label fx:id="productBrand" styleClass="label-value" text="N/A" GridPane.columnIndex="1"
                                       GridPane.rowIndex="2"/>

                                <Label styleClass="label-key" text="Product Type:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="3"/>
                                <Label fx:id="productType" styleClass="label-value" text="N/A" GridPane.columnIndex="1"
                                       GridPane.rowIndex="3"/>
                                <columnConstraints>
                                    <ColumnConstraints/>
                                    <ColumnConstraints/>
                                </columnConstraints>
                                <rowConstraints>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                </rowConstraints>
                            </GridPane>
                        </VBox>
                    </HBox>

                    <!-- Second Row: Destination & Pricing -->
                    <HBox spacing="20" styleClass="row">
                        <!-- Destination Address -->
                        <VBox spacing="15" styleClass="info-card" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label styleClass="section-title" text="Destination Address"/>
                            </HBox>

                            <VBox spacing="5" styleClass="address-content">
                                <Label fx:id="destinationAddress" styleClass="address-line" text="N/A"/>
                            </VBox>
                        </VBox>

                        <!-- Quantity & Pricing -->
                        <VBox spacing="15" styleClass="info-card" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label styleClass="section-title" text="Quantity &amp; Pricing"/>
                            </HBox>

                            <GridPane hgap="20" styleClass="info-grid" vgap="15">
                                <Label styleClass="label-key" text="Quantity:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="0"/>
                                <Label fx:id="quantity" styleClass="label-value, label-value-bold" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                <Label styleClass="label-key" text="Purchase Price:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="1"/>
                                <Label fx:id="purchasePrice" styleClass="label-value" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                <Label styleClass="label-key" text="Total Value:" GridPane.columnIndex="0"
                                       GridPane.rowIndex="2"/>
                                <Label fx:id="totalValue" styleClass="label-value, label-value-total" text="N/A"
                                       GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                <columnConstraints>
                                    <ColumnConstraints/>
                                    <ColumnConstraints/>
                                </columnConstraints>
                                <rowConstraints>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                    <RowConstraints/>
                                </rowConstraints>
                            </GridPane>
                        </VBox>
                    </HBox>

                    <!-- Physical Specifications -->
                    <VBox spacing="20" styleClass="info-card">
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <Label styleClass="section-title" text="Physical Specifications"/>
                        </HBox>

                        <HBox alignment="CENTER" spacing="40" styleClass="specs-container">
                            <!-- Weight -->
                            <VBox alignment="CENTER" spacing="10" styleClass="spec-box" HBox.hgrow="ALWAYS">
                                <Label fx:id="totalWeight" styleClass="spec-value" text="N/A"/>
                                <Label styleClass="spec-label" text="Total Weight"/>
                                <Label fx:id="weightPerUnit" styleClass="spec-sublabel" text="N/A"/>
                            </VBox>

                            <!-- Volume -->
                            <VBox alignment="CENTER" spacing="10" styleClass="spec-box" HBox.hgrow="ALWAYS">
                                <Label fx:id="totalVolume" styleClass="spec-value" text="N/A"/>
                                <Label styleClass="spec-label" text="Total Volume"/>
                                <Label fx:id="volumePerUnit" styleClass="spec-sublabel" text="N/A"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </VBox>
    </center>

</BorderPane>
